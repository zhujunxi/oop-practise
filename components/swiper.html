<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>swiper-轮播图</title>
		<link rel="stylesheet" type="text/css" href="../font/font.css"/>
		<link rel="stylesheet" type="text/css" href="../css/base.css"/>
		<style type="text/css">
			/* 主体 */
			.container {margin: 20px auto;width: 100%;overflow: hidden;position: relative}
			.img-list {position: relative;width: 9999px;list-style: none}
			.img-list li {float: left;width: 375px;}
			.img-list li img{width: 375px;}
			/* 箭头 */
			.arrow{width: 60px;height: 130px;line-height: 130px;text-align: center;font-size: 20px;position: absolute;top: 0%;background-color: rgba(0, 0, 0, .5)}
			.btn-prev {left: 0;}
			.btn-next {right: 0;}
			/* 指示器 */
			.dot {position: absolute;bottom: 10px;width:100%;text-align: center;}
			.dot span{display: inline-block;width: 20px;height: 20px;background-color: yellow;line-height: 20px;border-radius: 50%;cursor: pointer;}
			.dot .active{background-color: red;color: #FFF;}
		</style>
	</head>
	<body>

		<h2>slider</h2>
		
		<div class="container">
			<ul class="img-list clearfix">
				<li><img src="../static/01.jpg" /></li>
				<li><img src="../static/02.jpg" /></li>
				<li><img src="../static/03.jpg" /></li>
				<li><img src="../static/04.jpg" /></li>
				<li><img src="../static/05.jpg" /></li>
			</ul>
			<ul class="dot">
				<span class="active">1</span>
				<span>2</span>
				<span>3</span>
				<span>4</span>
				<span>5</span>
			</ul>
			<a href="javascript:void(0)" class="arrow btn-prev">&lt;</a>
			<a href="javascript:void(0)" class="arrow btn-next">&gt;</a>
		</div>
		<script src="https://cdn.bootcss.com/jquery/1.11.3/jquery.js"></script>
		<script type="text/javascript">
			function Carousel(config) {
				var $node = $(config.el);
				this.$pic = $node.find('.img-list')
				this.$picWidth = this.$pic.children().width()
				this.picLength = this.$pic.children().length
				this.$btnPrev = $node.find('.btn-prev')
				this.$btnNext = $node.find('.btn-next')
				this.$pageIndex = $node.find('.dot')
				this.num = 0
				this.lock = false
	
				this.init()
				this.bind()
				this.autoPlay()
			}
			Carousel.prototype = {
				init: function() {
					var $picFirst = this.$pic.children().eq(0).clone();
					var	$picLast = this.$pic.children().eq(this.picLength - 1).clone();
	
					this.$pic.prepend($picLast)
					this.$pic.append($picFirst)
					this.$pic.width(this.$picWidth * this.$pic.children().length)
					this.$pic.css({
						'left': -this.$picWidth
					})
				},
				showDot: function() {
					this.$pageIndex.children().removeClass('active')
					this.$pageIndex.children().eq(this.num).addClass('active')
				},
				autoPlay: function() {
					var self = this
					setInterval(function() {
						self.play()
					}, 3000)
				},
				renderDot: function() {
					for (var i = 0; i < this.picLength; i++) {
						var $li = $('<li></li>')
						this.$pageIndex.append($li)
					}
					this.$pageIndex.children().eq(0).addClass('active')
				},
				bind: function() {
					var self = this
	
					this.$btnNext.on('click', function() {
						self.play()
					})
	
					this.$btnPrev.on('click', function() {
						self.play(true)
					})
	
					this.$pageIndex.on('click', 'li', function() {
						self.num = self.$pageIndex.children().index($(this))
						self.showDot()
						self.$pic.animate({
							'left': -(self.num + 1) * self.$picWidth
						})
					})
				},
				play: function(isBack) {
					var self = this;
					if (this.lock) return;
					this.lock = true;
					if(isBack){
						self.$pic.animate({
							'left': '+=' + this.$picWidth
						}, function() {
							self.num--
								if (self.num < 0) {
									self.$pic.css('left', -(self.picLength * self.$picWidth))
									self.num = self.picLength - 1
								}
							self.lock = false
							self.showDot()
						})
					}else {
						self.$pic.animate({
							'left': '-=' + this.$picWidth
						}, function() {
							self.num++
								if (self.num === self.picLength) {
									self.$pic.css('left', -self.$picWidth)
									self.num = 0
								}
							self.lock = false
							self.showDot()
						})
					}
				}	
			}
	
			new Carousel({
				el:'.container',
				autoPlay:true,
				time:3000,
				showDot:true,
				showBtn:true,
			})
		</script>		
	</body>
</html>
